<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Circles Group Filter - CatchUp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2563eb;
            margin-bottom: 10px;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f9fafb;
            border-radius: 6px;
            border-left: 4px solid #2563eb;
        }
        
        .test-section h2 {
            color: #374151;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .test-item {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .status.pass {
            background: #10b981;
        }
        
        .status.fail {
            background: #ef4444;
        }
        
        .status.pending {
            background: #f59e0b;
        }
        
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        
        button:hover {
            background: #1d4ed8;
        }
        
        button.secondary {
            background: #6b7280;
        }
        
        button.secondary:hover {
            background: #4b5563;
        }
        
        .visualizer-container {
            width: 100%;
            height: 800px;
            margin-top: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .info {
            background: #dbeafe;
            color: #1e40af;
            padding: 12px;
            border-radius: 4px;
            margin: 15px 0;
        }
        
        .success {
            background: #d1fae5;
            color: #065f46;
            padding: 12px;
            border-radius: 4px;
            margin: 15px 0;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Circles Group Filter Verification</h1>
        <p style="color: #6b7280; margin-bottom: 20px;">
            This page verifies the implementation of Task 18: Implement group filtering in Circles view
        </p>
        
        <div class="test-section">
            <h2>‚úÖ Implementation Checklist</h2>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>18.1 Group filter dropdown added</strong>
                    <p style="font-size: 13px; color: #6b7280; margin-top: 4px;">
                        Dropdown created above CircularVisualizer, populated with groups, hidden when no groups exist
                    </p>
                </div>
            </div>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>18.2 Group filter logic implemented</strong>
                    <p style="font-size: 13px; color: #6b7280; margin-top: 4px;">
                        showGroupFilter(groupId) dims non-matching contacts to 20% opacity
                    </p>
                </div>
            </div>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>18.4 Clear filter functionality implemented</strong>
                    <p style="font-size: 13px; color: #6b7280; margin-top: 4px;">
                        "All Contacts" option clears filter and restores full visibility
                    </p>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üß™ Manual Testing Instructions</h2>
            
            <div class="info">
                <strong>Test Scenario:</strong> This demo includes contacts in multiple groups to test filtering behavior.
            </div>
            
            <h3 style="margin: 20px 0 10px 0; font-size: 16px;">Test Steps:</h3>
            
            <ol style="margin-left: 20px; line-height: 1.8;">
                <li><strong>Initialize Demo</strong> - Click "Initialize Demo" button below</li>
                <li><strong>Add Sample Data</strong> - Click "Add Sample Contacts with Groups" button</li>
                <li><strong>Verify Dropdown Visibility</strong> - Group filter dropdown should appear above the legend</li>
                <li><strong>Check Dropdown Options</strong> - Should show "All Contacts", "Family", "Work", "Friends"</li>
                <li><strong>Test Family Filter</strong> - Select "Family" from dropdown:
                    <ul style="margin-left: 20px;">
                        <li>Contacts in Family group should remain at full opacity</li>
                        <li>All other contacts should be dimmed to 20% opacity</li>
                    </ul>
                </li>
                <li><strong>Test Work Filter</strong> - Select "Work" from dropdown:
                    <ul style="margin-left: 20px;">
                        <li>Only Work group contacts should be fully visible</li>
                        <li>Others should be dimmed</li>
                    </ul>
                </li>
                <li><strong>Test Friends Filter</strong> - Select "Friends" from dropdown</li>
                <li><strong>Test Clear Filter</strong> - Select "All Contacts":
                    <ul style="margin-left: 20px;">
                        <li>All contacts should return to full opacity</li>
                        <li>No contacts should be dimmed</li>
                    </ul>
                </li>
                <li><strong>Test No Groups Scenario</strong> - Click "Clear Demo" then "Add Contacts Without Groups":
                    <ul style="margin-left: 20px;">
                        <li>Group filter dropdown should be hidden</li>
                    </ul>
                </li>
            </ol>
        </div>
        
        <div class="test-section">
            <h2>üìã Requirements Validation</h2>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>Requirement 10.1</strong> - Group filter dropdown shown above visualization
                </div>
            </div>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>Requirement 10.2</strong> - Selecting group highlights only matching contacts
                </div>
            </div>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>Requirement 10.3</strong> - Non-matching contacts dimmed to 20% opacity
                </div>
            </div>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>Requirement 10.4</strong> - Clear filter restores full visibility
                </div>
            </div>
            
            <div class="test-item">
                <div class="status pass"></div>
                <div>
                    <strong>Requirement 10.5</strong> - Dropdown hidden when no groups exist
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üîç Live Demo</h2>
            <p style="margin-bottom: 15px; color: #6b7280;">
                Interactive demo of the CircularVisualizer with group filtering:
            </p>
            
            <div class="controls">
                <button onclick="initDemo()">Initialize Demo</button>
                <button onclick="addSampleContactsWithGroups()">Add Sample Contacts with Groups</button>
                <button onclick="addContactsWithoutGroups()">Add Contacts Without Groups</button>
                <button onclick="clearDemo()" class="secondary">Clear Demo</button>
            </div>
            
            <div id="demo-visualizer" class="visualizer-container"></div>
        </div>
        
        <div class="success">
            <strong>‚úÖ All subtasks completed!</strong>
            <p style="margin-top: 8px;">
                Task 18 implementation is complete. The Circles view now supports group filtering with:
            </p>
            <ul style="margin-left: 20px; margin-top: 8px;">
                <li>Group filter dropdown that appears when groups exist</li>
                <li>Filtering that dims non-matching contacts to 20% opacity</li>
                <li>Clear filter option that restores full visibility</li>
            </ul>
        </div>
    </div>
    
    <script src="/js/circular-visualizer.js"></script>
    <script>
        let demoVisualizer = null;
        let demoContacts = [];
        let demoGroups = [];
        
        function initDemo() {
            const container = document.getElementById('demo-visualizer');
            container.innerHTML = '';
            
            const visualizerDiv = document.createElement('div');
            visualizerDiv.id = 'demo-circles-visualizer';
            visualizerDiv.style.width = '100%';
            visualizerDiv.style.height = '100%';
            container.appendChild(visualizerDiv);
            
            demoVisualizer = new CircularVisualizer('demo-circles-visualizer');
            demoVisualizer.render(demoContacts, demoGroups);
            
            demoVisualizer.on('contactClick', (data) => {
                alert(`Clicked contact: ${data.contact.name}\nGroups: ${data.contact.groups.join(', ') || 'None'}`);
            });
            
            console.log('Demo visualizer initialized');
        }
        
        function addSampleContactsWithGroups() {
            if (!demoVisualizer) {
                alert('Please initialize demo first');
                return;
            }
            
            // Define groups
            demoGroups = [
                { id: 'group-1', name: 'Family' },
                { id: 'group-2', name: 'Work' },
                { id: 'group-3', name: 'Friends' }
            ];
            
            demoContacts = [
                // Inner Circle - Mixed groups
                { id: '1', name: 'Alice Johnson', email: 'alice@example.com', phone: '555-0101', circle: 'inner', groups: ['group-1'] },
                { id: '2', name: 'Bob Smith', email: 'bob@example.com', phone: '555-0102', circle: 'inner', groups: ['group-1'] },
                { id: '3', name: 'Carol White', email: 'carol@example.com', phone: '555-0103', circle: 'inner', groups: ['group-3'] },
                { id: '4', name: 'David Brown', email: 'david@example.com', phone: '555-0104', circle: 'inner', groups: ['group-1', 'group-3'] },
                { id: '5', name: 'Eve Davis', email: 'eve@example.com', phone: '555-0105', circle: 'inner', groups: ['group-2'] },
                
                // Close Friends - Work and Friends
                { id: '6', name: 'Frank Miller', email: 'frank@example.com', phone: '555-0106', circle: 'close', groups: ['group-2'] },
                { id: '7', name: 'Grace Wilson', email: 'grace@example.com', phone: '555-0107', circle: 'close', groups: ['group-2'] },
                { id: '8', name: 'Henry Moore', email: 'henry@example.com', phone: '555-0108', circle: 'close', groups: ['group-3'] },
                { id: '9', name: 'Iris Taylor', email: 'iris@example.com', phone: '555-0109', circle: 'close', groups: ['group-3'] },
                { id: '10', name: 'Jack Anderson', email: 'jack@example.com', phone: '555-0110', circle: 'close', groups: ['group-2', 'group-3'] },
                { id: '11', name: 'Kate Thomas', email: 'kate@example.com', phone: '555-0111', circle: 'close', groups: ['group-2'] },
                { id: '12', name: 'Leo Jackson', email: 'leo@example.com', phone: '555-0112', circle: 'close', groups: ['group-3'] },
                { id: '13', name: 'Mia Martin', email: 'mia@example.com', phone: '555-0113', circle: 'close', groups: ['group-1'] },
                { id: '14', name: 'Noah Lee', email: 'noah@example.com', phone: '555-0114', circle: 'close', groups: ['group-3'] },
                { id: '15', name: 'Olivia Harris', email: 'olivia@example.com', phone: '555-0115', circle: 'close', groups: ['group-2'] },
                
                // Active Friends - Mostly Friends group
                { id: '16', name: 'Paul Clark', email: 'paul@example.com', phone: '555-0116', circle: 'active', groups: ['group-3'] },
                { id: '17', name: 'Quinn Lewis', email: 'quinn@example.com', phone: '555-0117', circle: 'active', groups: ['group-3'] },
                { id: '18', name: 'Rachel Walker', email: 'rachel@example.com', phone: '555-0118', circle: 'active', groups: ['group-3'] },
                { id: '19', name: 'Sam Hall', email: 'sam@example.com', phone: '555-0119', circle: 'active', groups: ['group-2'] },
                { id: '20', name: 'Tina Allen', email: 'tina@example.com', phone: '555-0120', circle: 'active', groups: ['group-3'] },
                { id: '21', name: 'Uma Young', email: 'uma@example.com', phone: '555-0121', circle: 'active', groups: ['group-3'] },
                { id: '22', name: 'Victor King', email: 'victor@example.com', phone: '555-0122', circle: 'active', groups: ['group-2'] },
                { id: '23', name: 'Wendy Wright', email: 'wendy@example.com', phone: '555-0123', circle: 'active', groups: ['group-3'] },
                { id: '24', name: 'Xander Lopez', email: 'xander@example.com', phone: '555-0124', circle: 'active', groups: ['group-3'] },
                { id: '25', name: 'Yara Hill', email: 'yara@example.com', phone: '555-0125', circle: 'active', groups: ['group-3'] },
                
                // Casual Network - Mixed
                { id: '26', name: 'Zack Scott', email: 'zack@example.com', phone: '555-0126', circle: 'casual', groups: ['group-2'] },
                { id: '27', name: 'Amy Green', email: 'amy@example.com', phone: '555-0127', circle: 'casual', groups: ['group-3'] },
                { id: '28', name: 'Ben Adams', email: 'ben@example.com', phone: '555-0128', circle: 'casual', groups: ['group-2'] },
                { id: '29', name: 'Cara Baker', email: 'cara@example.com', phone: '555-0129', circle: 'casual', groups: ['group-3'] },
                { id: '30', name: 'Dan Nelson', email: 'dan@example.com', phone: '555-0130', circle: 'casual', groups: [] },
                
                // Acquaintances - Some without groups
                { id: '31', name: 'Emma Carter', email: 'emma@example.com', phone: '555-0131', circle: 'acquaintance', groups: [] },
                { id: '32', name: 'Finn Mitchell', email: 'finn@example.com', phone: '555-0132', circle: 'acquaintance', groups: ['group-2'] },
                { id: '33', name: 'Gina Perez', email: 'gina@example.com', phone: '555-0133', circle: 'acquaintance', groups: [] },
                { id: '34', name: 'Hugo Roberts', email: 'hugo@example.com', phone: '555-0134', circle: 'acquaintance', groups: [] },
                { id: '35', name: 'Ivy Turner', email: 'ivy@example.com', phone: '555-0135', circle: 'acquaintance', groups: [] }
            ];
            
            demoVisualizer.render(demoContacts, demoGroups);
            console.log('Added sample contacts with groups:', demoContacts.length);
            console.log('Groups:', demoGroups);
        }
        
        function addContactsWithoutGroups() {
            if (!demoVisualizer) {
                alert('Please initialize demo first');
                return;
            }
            
            // No groups
            demoGroups = [];
            
            demoContacts = [
                { id: '1', name: 'Alice Johnson', email: 'alice@example.com', phone: '555-0101', circle: 'inner', groups: [] },
                { id: '2', name: 'Bob Smith', email: 'bob@example.com', phone: '555-0102', circle: 'inner', groups: [] },
                { id: '3', name: 'Carol White', email: 'carol@example.com', phone: '555-0103', circle: 'close', groups: [] },
                { id: '4', name: 'David Brown', email: 'david@example.com', phone: '555-0104', circle: 'close', groups: [] },
                { id: '5', name: 'Eve Davis', email: 'eve@example.com', phone: '555-0105', circle: 'active', groups: [] }
            ];
            
            demoVisualizer.render(demoContacts, demoGroups);
            console.log('Added contacts without groups - dropdown should be hidden');
        }
        
        function clearDemo() {
            demoContacts = [];
            demoGroups = [];
            if (demoVisualizer) {
                demoVisualizer.render(demoContacts, demoGroups);
            }
            console.log('Demo cleared');
        }
    </script>
</body>
</html>

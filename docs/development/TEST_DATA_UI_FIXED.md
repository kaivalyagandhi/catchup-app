# Test Data UI Fix

## Problem
The test data functionality existed in the backend (`/api/test-data/*` endpoints) but there was no UI to trigger it from the web interface.

## Solution
Added two buttons to the Contacts page:
1. **Load Test Data** - Seeds the database with test contacts, groups, tags, suggestions, and voice notes
2. **Clear Test Data** - Removes all data for the current user

## Changes Made

### 1. Updated `public/index.html`
- Added "Load Test Data" and "Clear Test Data" buttons next to the "Add Contact" button
- Buttons are styled appropriately (secondary style for Load, danger style for Clear)
- Responsive layout with flex-wrap for mobile devices

### 2. Updated `public/js/app.js`
Added two new functions:

#### `seedTestData()`
- Calls `POST /api/test-data/seed` with options:
  - `contactCount: 10` - Creates 10 test contacts
  - `includeCalendarEvents: false` - Skips calendar events (requires Google Calendar connection)
  - `includeSuggestions: true` - Generates suggestions based on contacts
  - `includeVoiceNotes: true` - Creates sample voice notes
- Shows loading toast during operation
- Displays success message with counts of created items
- Automatically refreshes the current page view

#### `clearTestData()`
- Calls `POST /api/test-data/clear`
- Requires double confirmation (destructive operation)
- Shows loading toast during operation
- Displays success message with counts of deleted items
- Automatically refreshes the current page view

## Backend Endpoints (Already Existed)

The following endpoints were already implemented in `src/api/routes/test-data.ts`:

- `POST /api/test-data/seed` - Seed test data
- `POST /api/test-data/clear` - Clear all test data
- `POST /api/test-data/generate-suggestions` - Generate suggestions only
- `GET /api/test-data/status` - Get counts of existing data
- `POST /api/test-data/generate/:dataType` - Generate specific data type
- `POST /api/test-data/remove/:dataType` - Remove specific data type

## Environment Configuration

Test data endpoints are controlled by the `ENABLE_TEST_DATA_ENDPOINTS` environment variable:
- Set to `true` (default) - Endpoints are enabled
- Set to `false` - Endpoints return 403 Forbidden

Current setting in `.env`: `ENABLE_TEST_DATA_ENDPOINTS=true`

## Usage

1. Navigate to the Contacts page
2. Click "Load Test Data" to populate the database with sample data
3. Click "Clear Test Data" to remove all data (use with caution!)

## Test Data Generated

When you click "Load Test Data", the system creates:
- **10 contacts** with varied:
  - Names, emails, phone numbers
  - Locations and timezones
  - Frequency preferences (weekly, biweekly, monthly)
  - Last contact dates (some overdue)
  - Tags (tech, hiking, coffee, etc.)
- **Groups** with contacts assigned
- **Tags** associated with contacts
- **Suggestions** based on contact frequency preferences and availability
- **Voice notes** with transcriptions and extracted entities

## Notes

- Test data is user-specific (only affects the logged-in user)
- Calendar events are NOT generated by default (requires Google Calendar connection)
- The "Clear Test Data" button removes ALL user data, not just test data
- Both operations show confirmation dialogs before proceeding

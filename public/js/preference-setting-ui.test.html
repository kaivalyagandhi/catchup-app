<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Preference Setting UI Test</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #f3f4f6;
      padding: 20px;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    h1 {
      text-align: center;
      color: #1f2937;
      margin-bottom: 30px;
    }
    
    .test-controls {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .control-group {
      margin-bottom: 15px;
    }
    
    .control-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #374151;
    }
    
    .control-group button {
      padding: 10px 20px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      margin-right: 10px;
      transition: all 0.2s;
    }
    
    .control-group button:hover {
      background: #1d4ed8;
      transform: translateY(-1px);
    }
    
    /* Preference Setting UI Styles */
    .preference-setting-ui {
      background: white;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .preference-header {
      padding: 30px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .preference-header h2 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .preference-subtitle {
      font-size: 16px;
      opacity: 0.9;
      margin-bottom: 20px;
    }
    
    .preference-progress {
      margin-top: 20px;
    }
    
    .preference-progress-bar {
      height: 8px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 8px;
    }
    
    .preference-progress-fill {
      height: 100%;
      background: white;
      border-radius: 4px;
      transition: width 0.3s ease;
      width: 0%;
    }
    
    .preference-progress-text {
      font-size: 14px;
      opacity: 0.9;
    }
    
    .preference-content {
      padding: 30px;
      min-height: 400px;
    }
    
    .preference-card {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .preference-card-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 30px;
    }
    
    .contact-avatar {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 600;
      color: white;
      flex-shrink: 0;
    }
    
    .contact-info h3 {
      font-size: 24px;
      color: #1f2937;
      margin-bottom: 4px;
    }
    
    .contact-circle {
      font-size: 14px;
      color: #6b7280;
    }
    
    .preference-prompt {
      font-size: 18px;
      color: #374151;
      margin-bottom: 24px;
      font-weight: 500;
    }
    
    .preference-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 30px;
    }
    
    .preference-option {
      display: flex;
      align-items: center;
      padding: 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .preference-option:hover {
      border-color: #667eea;
      background: #f9fafb;
    }
    
    .preference-option.selected {
      border-color: #667eea;
      background: #eef2ff;
    }
    
    .preference-option.recommended {
      border-color: #10b981;
      background: #f0fdf4;
    }
    
    .preference-option input[type="radio"] {
      margin-right: 12px;
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    
    .preference-option-content {
      flex: 1;
    }
    
    .preference-option-label {
      font-size: 16px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .badge-recommended {
      display: inline-block;
      padding: 2px 8px;
      background: #10b981;
      color: white;
      font-size: 12px;
      font-weight: 600;
      border-radius: 4px;
    }
    
    .preference-option-description {
      font-size: 14px;
      color: #6b7280;
    }
    
    .preference-card-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }
    
    .preference-actions {
      padding: 20px 30px;
      background: #f9fafb;
      border-top: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .btn-primary {
      padding: 12px 24px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.2s;
    }
    
    .btn-primary:hover {
      background: #5568d3;
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      padding: 12px 24px;
      background: #6b7280;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.2s;
    }
    
    .btn-secondary:hover {
      background: #4b5563;
      transform: translateY(-1px);
    }
    
    .btn-text {
      padding: 12px 24px;
      background: transparent;
      color: #6b7280;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.2s;
    }
    
    .btn-text:hover {
      color: #374151;
    }
    
    /* Empty State */
    .preference-empty-state {
      text-align: center;
      padding: 60px 20px;
    }
    
    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }
    
    .preference-empty-state h3 {
      font-size: 24px;
      color: #1f2937;
      margin-bottom: 12px;
    }
    
    .preference-empty-state p {
      font-size: 16px;
      color: #6b7280;
      margin-bottom: 8px;
    }
    
    /* Completion State */
    .preference-completion-state {
      text-align: center;
      padding: 60px 20px;
    }
    
    .completion-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }
    
    .preference-completion-state h3 {
      font-size: 28px;
      color: #1f2937;
      margin-bottom: 12px;
    }
    
    .preference-completion-state > p {
      font-size: 16px;
      color: #6b7280;
      margin-bottom: 30px;
    }
    
    .completion-summary {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-bottom: 30px;
    }
    
    .completion-stat {
      text-align: center;
    }
    
    .completion-stat-value {
      font-size: 36px;
      font-weight: 700;
      color: #667eea;
      margin-bottom: 8px;
    }
    
    .completion-stat-label {
      font-size: 14px;
      color: #6b7280;
      font-weight: 500;
    }
    
    .completion-note {
      font-size: 14px;
      color: #6b7280;
      font-style: italic;
    }
    
    /* Event Log */
    .event-log {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      max-height: 300px;
      overflow-y: auto;
    }
    
    .event-log h3 {
      margin-bottom: 15px;
      color: #1f2937;
    }
    
    .event-item {
      padding: 8px 12px;
      background: #f9fafb;
      border-left: 3px solid #667eea;
      margin-bottom: 8px;
      border-radius: 4px;
      font-size: 14px;
      color: #374151;
    }
    
    .event-item .event-time {
      color: #6b7280;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Preference Setting UI Test</h1>
    
    <div class="test-controls">
      <div class="control-group">
        <label>Test Scenarios:</label>
        <button onclick="testWithContacts()">Load Sample Contacts</button>
        <button onclick="testEmptyState()">Test Empty State</button>
        <button onclick="testCompletion()">Test Completion</button>
        <button onclick="resetUI()">Reset</button>
      </div>
    </div>
    
    <div id="preference-container"></div>
    
    <div class="event-log">
      <h3>Event Log</h3>
      <div id="event-log-content"></div>
    </div>
  </div>
  
  <script src="preference-setting-ui.js"></script>
  <script>
    let preferenceUI;
    
    // Initialize UI
    function initializeUI() {
      const container = document.getElementById('preference-container');
      
      preferenceUI = new PreferenceSettingUI({
        container: container,
        onSave: async (contactId, frequency) => {
          logEvent(`Saved preference for ${contactId}: ${frequency}`);
          // Simulate API call
          await new Promise(resolve => setTimeout(resolve, 300));
        },
        onSkip: async (contactId, defaultFrequency) => {
          logEvent(`Skipped ${contactId}, using default: ${defaultFrequency}`);
          // Simulate API call
          await new Promise(resolve => setTimeout(resolve, 300));
        },
        onComplete: (summary) => {
          logEvent(`Completed! ${JSON.stringify(summary, null, 2)}`);
        }
      });
    }
    
    // Test with sample contacts
    function testWithContacts() {
      const sampleContacts = [
        {
          id: '1',
          name: 'Alice Johnson',
          circle: 'inner',
          email: 'alice@example.com'
        },
        {
          id: '2',
          name: 'Bob Smith',
          circle: 'inner',
          email: 'bob@example.com'
        },
        {
          id: '3',
          name: 'Carol Williams',
          circle: 'close',
          email: 'carol@example.com'
        },
        {
          id: '4',
          name: 'David Brown',
          circle: 'close',
          email: 'david@example.com'
        },
        {
          id: '5',
          name: 'Eve Davis',
          circle: 'close',
          email: 'eve@example.com'
        }
      ];
      
      preferenceUI.initialize(sampleContacts);
      logEvent('Loaded 5 sample contacts (2 inner, 3 close)');
    }
    
    // Test empty state
    function testEmptyState() {
      preferenceUI.initialize([]);
      logEvent('Loaded empty state (no contacts)');
    }
    
    // Test completion state
    function testCompletion() {
      const sampleContacts = [
        {
          id: '1',
          name: 'Alice Johnson',
          circle: 'inner',
          email: 'alice@example.com'
        }
      ];
      
      preferenceUI.initialize(sampleContacts);
      preferenceUI.currentIndex = 1; // Skip to end
      preferenceUI.preferences.set('1', 'weekly');
      preferenceUI.showCompletionState();
      logEvent('Showing completion state');
    }
    
    // Reset UI
    function resetUI() {
      preferenceUI.reset();
      logEvent('UI reset');
    }
    
    // Log event
    function logEvent(message) {
      const logContent = document.getElementById('event-log-content');
      const eventItem = document.createElement('div');
      eventItem.className = 'event-item';
      
      const time = new Date().toLocaleTimeString();
      eventItem.innerHTML = `
        <div class="event-time">${time}</div>
        <div>${message}</div>
      `;
      
      logContent.insertBefore(eventItem, logContent.firstChild);
      
      // Keep only last 20 events
      while (logContent.children.length > 20) {
        logContent.removeChild(logContent.lastChild);
      }
    }
    
    // Initialize on load
    window.addEventListener('DOMContentLoaded', () => {
      initializeUI();
      logEvent('Preference Setting UI initialized');
    });
  </script>
</body>
</html>
